(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65857,e=>{"use strict";var s=e.i(43476),t=e.i(71645);e.i(51718);var a=e.i(18357);e.i(36180);var r=e.i(98925),d=e.i(71935),l=e.i(151);function o(){let{user:e}=(0,d.useAuth)(),[o,i]=(0,t.useState)(""),[n,c]=(0,t.useState)(""),[m,x]=(0,t.useState)(""),[u,g]=(0,t.useState)(""),[b,y]=(0,t.useState)(""),[p,h]=(0,t.useState)(""),[f,j]=(0,t.useState)(""),[v,w]=(0,t.useState)(!0);(0,t.useEffect)(()=>{e&&(i(e.displayName||""),c(e.photoURL||""),(async()=>{try{let s=(0,r.doc)(l.db,"users",e.uid),t=await (0,r.getDoc)(s);if(t.exists()&&t.data().address){let e=t.data().address;x(e.street||""),g(e.city||""),y(e.zipCode||"")}}catch(e){console.error("Błąd pobierania adresu:",e)}finally{w(!1)}})())},[e]);let N=async s=>{if(s.preventDefault(),h(""),j(""),e)try{await (0,a.updateProfile)(e,{displayName:o,photoURL:n}),await (0,r.setDoc)((0,r.doc)(l.db,"users",e.uid),{address:{street:m,city:u,zipCode:b}},{merge:!0}),j("Profil i adres zostały zaktualizowane.")}catch(e){console.error(e),h("Wystąpił błąd: "+e.message)}};return(0,s.jsxs)("div",{className:"max-w-md mx-auto mt-10 bg-white p-8 rounded-xl shadow-md border border-gray-100",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Twój Profil"}),(0,s.jsx)("div",{className:"mb-6 flex justify-center",children:n?(0,s.jsx)("img",{src:n,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover border-4 border-indigo-100",onError:e=>{e.target.style.display="none"}}):(0,s.jsx)("div",{className:"w-24 h-24 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-500 text-2xl font-bold",children:o?o.charAt(0).toUpperCase():e?.email?.charAt(0).toUpperCase()})}),p&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded text-sm",children:p}),f&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded text-sm",children:f}),(0,s.jsxs)("form",{onSubmit:N,className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-900",children:"Email"}),(0,s.jsx)("input",{type:"text",value:e?.email||"",disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 px-3 py-2 text-gray-800 font-medium sm:text-sm border"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-900",children:"Nazwa użytkownika"}),(0,s.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),disabled:v,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder-gray-400",placeholder:"Np. JanKowalski"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-900",children:"URL Zdjęcia"}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>c(e.target.value),disabled:v,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder-gray-400"})]})]}),(0,s.jsxs)("div",{className:"relative py-2",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,s.jsx)("div",{className:"relative flex justify-center",children:(0,s.jsx)("span",{className:"bg-white px-2 text-sm font-medium text-gray-500",children:"Dane Adresowe"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-900",children:"Ulica"}),(0,s.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),disabled:v,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder-gray-400"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-900",children:"Miasto"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>g(e.target.value),disabled:v,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder-gray-400"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-900",children:"Kod pocztowy"}),(0,s.jsx)("input",{type:"text",value:b,onChange:e=>y(e.target.value),disabled:v,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder-gray-400"})]})]}),(0,s.jsx)("button",{type:"submit",disabled:v,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-bold text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 transition-colors",children:v?"Ładowanie...":"Zapisz zmiany"})]})]})}e.s(["default",()=>o])}]);