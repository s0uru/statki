(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14884,e=>{"use strict";var a=e.i(43476),r=e.i(71645);e.i(36180);var t=e.i(98925),s=e.i(151),d=e.i(71935);function i(){let{user:e}=(0,d.useAuth)(),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[n,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{e&&(async()=>{try{let a=(0,t.query)((0,t.collection)(s.db,"articles"),(0,t.where)("user","==",e.uid)),r=(await (0,t.getDocs)(a)).docs.map(e=>({id:e.id,...e.data()}));o(r)}catch(e){console.error("Błąd pobierania artykułów:",e)}finally{u(!1)}})()},[e]);let g=async a=>{if(a.preventDefault(),l.trim())try{let a=await (0,t.addDoc)((0,t.collection)(s.db,"articles"),{title:l,user:e.uid,createdAt:(0,t.serverTimestamp)()});o([...i,{id:a.id,title:l,user:e.uid}]),c("")}catch(e){console.error("Błąd dodawania:",e),alert("Błąd dodawania: "+e.message)}};return e?(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Moje Artykuły"}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Dodaj nowy wpis"}),(0,a.jsxs)("form",{onSubmit:g,className:"flex gap-4",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"Tytuł artykułu...",className:"flex-1 rounded-md border border-gray-300 px-4 py-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),(0,a.jsx)("button",{type:"submit",className:"rounded-md bg-indigo-600 px-6 py-2 text-white hover:bg-indigo-700",children:"Dodaj"})]})]}),(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:n?(0,a.jsx)("p",{className:"text-gray-500",children:"Ładowanie danych..."}):i.length>0?i.map(e=>(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition",children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["ID: ",e.id]})]},e.id)):(0,a.jsx)("p",{className:"text-gray-500 col-span-full text-center py-10 bg-white rounded-lg border border-dashed border-gray-300",children:"Brak artykułów. Dodaj pierwszy powyżej!"})})]}):null}e.s(["default",()=>i])}]);